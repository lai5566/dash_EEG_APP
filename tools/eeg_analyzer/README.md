# EEG資料傳輸分析和模擬工具

## 概述

這是一個獨立運行的EEG資料分析和模擬工具，用於了解EEG設備的資料傳輸特性、資料型態和頻率特徵，同時提供模擬資料生成功能。

## 功能特色

### 1. 資料傳輸分析
- **原始資料分析**: 分析 `raw_data_batched` 表中的電壓資料
- **統一記錄分析**: 分析 `unified_records` 表中的聚合資料
- **ASIC頻帶分析**: 分析各個腦波頻帶的統計特性
- **傳輸速率統計**: 計算實際的資料傳輸頻率和樣本率

### 2. 資料特性統計
- 資料範圍 (最小值、最大值、平均值)
- 標準差和變異數
- 傳輸頻率分析
- 資料型態識別

### 3. 模擬資料生成
- **真實EEG信號**: 基於腦波頻帶生成512Hz的電壓信號
- **認知資料**: 模擬注意力、冥想度等認知指標
- **ASIC頻帶資料**: 模擬8個腦波頻帶的功率譜
- **即時傳輸模擬**: 模擬真實的資料傳輸過程

### 4. 報告生成
- JSON格式的詳細分析報告
- 資料庫結構分析
- 設備使用模式分析

## 使用方法

### 運行工具
```bash
cd tools/eeg_analyzer
python eeg_analyzer.py
```

### 功能選單
1. **分析現有EEG資料傳輸特性** - 分析資料庫中的實際資料
2. **生成資料傳輸報告** - 生成完整的JSON報告文件
3. **模擬即時EEG資料傳輸** - 實時模擬資料傳輸過程
4. **生成模擬資料文件** - 創建模擬資料的JSON文件
5. **退出** - 結束程式

## 資料範圍和頻率特徵

### 電壓信號 (raw_value)
- **範圍**: -0.001V 到 +0.001V
- **頻率**: 512 Hz
- **精度**: 微伏級別

### 認知指標
- **注意力 (attention)**: 0-100
- **冥想度 (meditation)**: 0-100
- **信號品質 (signal_quality)**: 0-200
- **更新頻率**: ~5 Hz

### ASIC頻帶資料
- **Delta (δ)**: 50,000-200,000 (低頻高幅度)
- **Theta (θ)**: 30,000-150,000
- **Alpha (α)**: 15,000-100,000
- **Beta (β)**: 8,000-60,000
- **Gamma (γ)**: 3,000-30,000 (高頻低幅度)
- **更新頻率**: ~1 Hz

## 輸出文件

### 分析報告 (`eeg_transmission_report_YYYYMMDD_HHMMSS.json`)
```json
{
  "analysis_time": "2025-01-17T...",
  "database_path": "/path/to/enhanced_eeg.db",
  "tables_structure": {...},
  "raw_data_analysis": {...},
  "unified_records_analysis": {...},
  "asic_data_analysis": {...},
  "configuration": {...}
}
```

### 模擬資料 (`simulated_eeg_data_YYYYMMDD_HHMMSS.json`)
```json
{
  "metadata": {
    "duration_seconds": 60,
    "sample_rate": 512,
    "total_voltage_samples": 30720
  },
  "eeg_voltage_signal": [...],
  "cognitive_data": [...],
  "asic_bands_data": [...]
}
```

## 技術細節

### 資料來源
- 從專案的SQLite資料庫讀取實際EEG資料
- 使用專案的配置文件 (`app_config.py`) 獲取參數
- 基於ThinkGear協議的資料格式

### 模擬演算法
- **腦波生成**: 使用正弦波合成各頻帶信號
- **雜訊添加**: 模擬真實環境的電磁干擾
- **認知變化**: 使用趨勢函數模擬認知狀態變化
- **頻率控制**: 精確控制各類資料的更新頻率

### 統計方法
- 描述性統計 (均值、方差、範圍)
- 頻率分析 (每秒更新次數)
- 時間序列分析 (資料傳輸模式)

## 依賴需求

- Python 3.7+
- sqlite3 (標準庫)
- json (標準庫)
- statistics (標準庫)
- 專案的配置模組

## 注意事項

1. 確保資料庫文件存在且可訪問
2. 模擬資料僅用於測試和開發用途
3. 大量資料生成時注意磁碟空間
4. 即時模擬會佔用CPU資源

## 更新日誌

- v1.0.0 (2025-01-17): 初始版本，包含完整的分析和模擬功能